<app-sidebar></app-sidebar>
<div class="dashboard-content-wrapper">
  <div class="container dashboard-main-container py-3">
    <h2 class="text-center text-primary mb-4 fw-bold">Dashboard FORD</h2>

    <div class="row mb-4 justify-content-center">
      <div class="col-md-6 col-lg-4">
        <label for="selectVehicle" class="form-label fw-semibold">Veículo</label>
        <select id="selectVehicle" [(ngModel)]="selectedId" (change)="onSelectChange()" class="form-select form-select-lg">
          <option [value]="''" disabled selected>Selecione um veículo</option>
          <option *ngFor="let vehicle of vehicles" [value]="vehicle.id">{{ vehicle.vehicle }}</option>
        </select>
      </div>
    </div>

    <div *ngIf="selectedVehicleFromSelect" class="row text-center mb-4 g-3">
      <div class="col-sm-6 col-md-4">
        <div class="info-card shadow-sm">
          <h6 class="info-card-title">Total de Vendas</h6>
          <h4 class="info-card-value text-primary">{{ selectedVehicleFromSelect.volumetotal }}</h4>
          <small class="info-card-unit">Unid.</small>
        </div>
      </div>
      <div class="col-sm-6 col-md-4">
        <div class="info-card shadow-sm">
          <h6 class="info-card-title">Conectados</h6>
          <h4 class="info-card-value text-primary">{{ selectedVehicleFromSelect.connected }}</h4>
          <small class="info-card-unit">Unid.</small>
        </div>
      </div>
      <div class="col-sm-12 col-md-4">
        <div class="info-card shadow-sm">
          <h6 class="info-card-title">Atualizações de Software</h6>
          <h4 class="info-card-value text-primary">{{ selectedVehicleFromSelect.softwareUpdates }}</h4>
          <small class="info-card-unit">Unid.</small>
        </div>
      </div>
    </div>

    <div *ngIf="selectedVehicleFromSelect" class="text-center mb-4 vehicle-image-container">
      <img [src]="selectedVehicleFromSelect.img" [alt]="selectedVehicleFromSelect.vehicle" class="img-fluid rounded vehicle-image">
    </div>
  </div>

  <div class="fixed-bottom-bar">
    <div class="container-fluid py-2"> 
      <div class="table-responsive"> 
        <table class="table table-bordered table-hover table-striped text-center align-middle mb-0 data-table">
          <thead class="table-header-azul">
            <tr>
              <th><i class="bi bi-upc-scan me-1 d-none d-sm-inline"></i> VIN</th>
              <th><i class="bi bi-speedometer2 me-1 d-none d-sm-inline"></i> Odômetro</th>
              <th><i class="bi bi-fuel-pump-fill me-1 d-none d-sm-inline"></i> Combustível</th>
              <th><i class="bi bi-circle-half me-1 d-none d-sm-inline"></i> Status</th>
              <th><i class="bi bi-geo-alt-fill me-1 d-none d-sm-inline"></i> Lat.</th>
              <th><i class="bi bi-geo-alt-fill me-1 d-none d-sm-inline"></i> Long.</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="p-2 vin-search-cell">
                <div class="input-group input-group-sm"> 
                  <input [(ngModel)]="searchVin" class="form-control shadow-sm" placeholder="Digite o VIN" />
                  <button class="btn btn-primary" (click)="searchByVin()">Buscar</button> 
                </div>
              </td>
              <td>
                {{ selectedVehicleFromSearch?.odometro ? selectedVehicleFromSearch?.odometro + ' Km' : '-' }}
              </td>
              <td>
                {{ selectedVehicleFromSearch?.nivelCombustivel ? selectedVehicleFromSearch?.nivelCombustivel + ' %' : '-' }}
              </td>
              <td>{{ selectedVehicleFromSearch?.status || '-' }}</td>
              <td>{{ selectedVehicleFromSearch?.lat || '-' }}</td>
              <td>{{ selectedVehicleFromSearch?.long || '-' }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>